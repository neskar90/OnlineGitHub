<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asociacion contra el cáncer de testículo</title>
<link rel="stylesheet" href="css/style.css">

<script type="text/javascript">
	
	function llamada(){
		fetch('GestionCarrera?op=1')
		.then(response => response.json())
		.then(data => pintarTabla(data))	
	}

	function borrar(id){
		
		if(confirm("Seguro que quieres borrar")){
			fetch('GestionCarrera?idCarrera='+id+'&op=3')
			.then(response => response.json())
			.then(data => pintarTabla(data))
		}else{
			
		}
	}


	
	function pintarTabla(datos){
		
		let html = "<table>";
		html +="<thead>"
		html +="<th>#</th>";
		html +="<th>fecha</th>";
		html +="<th>nombre</th>";
		html +="<th>ciudad</th>";
		html +="<th>distancia</th>";
		html +="<th></th>";
		html +="<th></th>";
		html +="<th></th>";
		html +="</thead>"
		for(let i=0;i<datos.length;i++){	

				html +="<tr><td>"+datos[i].idCarrera+"</td>";
				html +="<td>"+datos[i].fechaCarrera+"</td>";
				html +="<td>"+datos[i].nombreCarrera+"</td>";
				html +="<td>"+datos[i].ciudadCarrera+"</td>";
				html +="<td>"+datos[i].distanciaCarrera+"</td>";
				html +="<td><a href='AnadirCarrera.html?idCarrera="+datos[i].idCarrera+"&op=2'>Editar</a></td><td> <a href='javascript:borrar("+datos[i].idCarrera+")'>Borrar</a></td>";
				html +="<td><a href='ListaCorredores.html'>Lista Corredores</a></td>";

				
				html +="</tr>";	
		}
		
		html +="</table>";
	
		document.getElementById("listado").innerHTML = html;
		console.log(datos);		
	}
	
    window.onload = function() {
    
    	llamada();
    } 
    
</script>

</head>
<body>

	<!-- Header -->
	<div class="banner">
		<img src="img/Logo.png" alt="logoheader" class="headerlogo">
	</div>
	<!-- Navigation Bar -->

  <div class="navbar">
  	<a href="index.html">Inicio</a>
    <a href="noticias.html">Noticias</a>
    <a href="TiendaSolidaria.html">Tienda Solidaria</a>
    <a href="ListaCarreraSolidaria2.html">Carreras Solidarias</a>
    <a href="Login.html">Iniciar session</a>
    <a href="InscripcionUsuario.html">Registrame</a>
    <a href="GestorPortal.html">GestorPortal</a>
  </div>
	<h1 class="h1">Lista carreras</h1>
	</div>
	
	

	<section>
		<div id="listado"></div>
	

	</section>



	<!-- Footer -->
	<div class="footer">
		<h2>2024 Asociacion contra el cáncer de testículo - © Copyright
			2024 - Diseñado por Renaud Bronchart</h2>
	</div>

</body>
</html>
