<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Asociacion contra el cáncer de testículo</title>
    <link rel="stylesheet" href="css/style.css">
    
	<script type="text/javascript">
    
	function llamada(idNoticia, op){
		fetch('GestionNoticia?idNoticia='+idNoticia+"&op="+op)
		.then(response => response.json())
		.then(data => pintarFormulario(data))
	
	}
	 /* para otener el valor de un parametro en el GET  */
		function getParameterByName(name) {
			    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			    results = regex.exec(location.search);
			    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}
   		 function validarFormulario(){
			   
			let titulo = document.getElementById('titulo').value;
   		    let descripcion = document.getElementById('descripcion').value;

			let ok = true;
			if(titulo == ""){
				ok = false;
				document.getElementById('titulo').style.background = "red";
			}
			
			if(descripcion == ""){
				ok = false;
				document.getElementById('descripcion').style.background = "red";
			}

			if(ok == true){
				document.getElementById("ListaNoticiasGestor").submit();	
			}
				   
		}
   		 
 		function pintarFormulario(datos){
 			document.getElementById("idNoticia").value = datos.idNoticia;
			document.getElementById("titulo").value = datos.titulo;
			document.getElementById("descripcion").value = datos.descripcion;

		}
    
 		window.onload = function(){
			let idNoticia = getParameterByName("idNoticia");
			let op = getParameterByName("op");
			llamada(idNoticia,op);
			
		}
 		
    </script>
</head>
<body>

  <!-- Header -->
  <div class="banner">
    <img src="img/Logo.png" alt="logoheader" class="headerlogo">
  </div>
  
  
  <!-- Navigation Bar -->
  <div class="navbar">
    <a href="index.html">Inicio</a>
    <a href="noticias.html">Noticias</a>
    <a href="TiendaSolidaria.html">Tienda Solidaria</a>
    <a href="ListaCarreraSolidaria2.html">Carreras Solidarias</a>
    <a href="Login.html">Iniciar session</a>
    <a href="InscripcionUsuario.html">Registrame</a>
    <a href="GestorPortal.html">GestorPortal</a>
  </div>
  
  <!-- main content anadir carrera -->

        <h1 class="h2">Añadir Noticia</h1>  

            <div class="Containerform">
                    <form name="frm" method="post" action="GestionNoticia" id="ListaNoticiasGestor">
                    <fieldset id="form">
                    <legend>Noticia</legend>
                    <ol>
                    	<input type="hidden" id="idNoticia" name="idNoticia">
                        <li><label>Titulo: </label><input type="text" id="titulo"  name="titulo" size="60" /></li>
                        <li><label>Descripcion: </label> <textarea id="descripcion" name="descripcion" rows="30" cols="80"></textarea></li>
                        
                    </ul>
                      <p align="center"> <input type="submit" name="submit" class="btn"  onclick="validarFormulario()" value="Enviar"></p>
                    </fieldset>
                    </form>
            </div>  

  <!-- Footer -->
  <div class="footer">
    <h2>2024 Asociacion contra el cáncer de testículo - © Copyright 2024 - Diseñado por Renaud Bronchart</h2>
  </div>
  



</body>
</html>